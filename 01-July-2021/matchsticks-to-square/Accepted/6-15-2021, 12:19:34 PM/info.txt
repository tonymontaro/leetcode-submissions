{"id":508241661,"lang":"cpp","time":"2 weeks, 1 day","timestamp":1623755974,"status_display":"Accepted","runtime":"12 ms","url":"/submissions/detail/508241661/","is_pending":"Not Pending","title":"Matchsticks to Square","memory":"10.1 MB","code":"#define pi pair<ll, ll>\n#define pii pair<ll, pi>\n#define v vector\n#define ll long long\n\nclass Solution {\npublic:\n    ll part;\n    int n;\n    vector<int> nums;\n    ll cache[40000] = {0};\n    bool makesquare(vector<int>& matchsticks) {\n        ll total = accumulate(matchsticks.begin(), matchsticks.end(), 0);\n        if (total % 4 != 0) return false;\n        part = total / 4;\n        n = matchsticks.size();\n        nums = matchsticks;\n        return solve(0, 0);\n    }\n    bool solve(ll sm, int mask) {\n        if (cache[mask]) return false;\n        ll total = 0;\n        for (int i = 0; i < n; i++) if (((1 << i) & mask) == 0) total += nums[i];\n        if (total == part) return true;\n\n        for (int i = 0; i < n; i++) {\n            if (((1 << i) & mask) != 0) continue;\n            int m = mask | (1 << i);\n            ll ss = sm + nums[i];\n            if (ss > part) continue;\n            if (ss == part) ss = 0;\n            if (solve(ss, m)) return true;\n        }\n        \n        cache[mask] = 1;\n        return false;\n    }\n};","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"matchsticks-to-square"}