{"id":487196600,"lang":"cpp","time":"2Â months","timestamp":1619819537,"status_display":"Accepted","runtime":"68 ms","url":"/submissions/detail/487196600/","is_pending":"Not Pending","title":"Max Stack","memory":"37.2 MB","code":"class MaxStack {\npublic:\n    /** initialize your data structure here. */\n    multiset<pair<int, int>, greater<>> pq;\n    stack<pair<int, int>> st;\n    set<int> deleted;\n    int id = 0;\n    MaxStack() {\n\n    }\n\n    void push(int x) {\n        pq.insert({x, id});\n        st.push({x, id++});\n    }\n\n    int pop() {\n        auto num = st.top();\n        pq.erase(pq.find(num));\n        st.pop();\n        balance();\n        return num.first;\n    }\n\n    int top() {\n        return st.top().first;\n    }\n\n    int peekMax() {\n        return pq.begin()->first;\n    }\n    void balance() {\n        while (!st.empty() && deleted.find(st.top().second) != deleted.end()) {\n            st.pop();\n        }\n    }\n    int popMax() {\n        auto num = *pq.begin();\n        deleted.insert(num.second);\n        pq.erase(pq.begin());\n        balance();\n        return num.first;\n    }\n};\n","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"max-stack"}