{"id":472311826,"lang":"cpp","time":"3 months, 1 week","timestamp":1616684139,"status_display":"Accepted","runtime":"284 ms","url":"/submissions/detail/472311826/","is_pending":"Not Pending","title":"Kth Ancestor of a Tree Node","memory":"111.7 MB","code":"#define ll long long\n#define umap unordered_map\n#define uset unordered_set\n#define pii pair<int, pair<int, int>>\n#define v vector\n\nclass TreeAncestor {\npublic:\n    int ansc[50001][17];\n    int n;\n    int mx = 16;\n    TreeAncestor(int nn, vector<int>& parent) {\n        n = nn;\n        for (int i = 0; i < n; i++) ansc[i][0] = parent[i];\n        for (int i = 1; i <= mx; i++) {\n            for (int node = 0; node < n; node++) {\n                int p = ansc[node][i - 1];\n                if (p == -1) ansc[node][i] = -1;\n                else ansc[node][i] = ansc[p][i - 1];\n            }\n        }\n    }\n\n    int getKthAncestor(int node, int k) {\n        for (int i = 16; i >= 0; i--) {\n            if (((1 << i) & k) != 0) node = ansc[node][i];\n            if (node == -1) return -1;\n        }\n        return node;\n    }\n};","compare_result":"1111111111","title_slug":"kth-ancestor-of-a-tree-node"}