{"id":472271660,"lang":"cpp","time":"3 months, 1 week","timestamp":1616674588,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/472271660/","is_pending":"Not Pending","title":"Kth Ancestor of a Tree Node","memory":"N/A","code":"#define ll long long\n#define umap unordered_map\n#define uset unordered_set\n#define pii pair<int, pair<int, int>>\n#define v vector\n\n\nclass TreeAncestor {\npublic:\n    v<umap<int, int>> anscestor;\n    int n;\n    int mx = 16;\n    TreeAncestor(int nn, vector<int>& parent) {\n        n = nn;\n        v<umap<int, int>> ansc(n);\n        for (int i = 0; i < n; i++) ansc[i][0] = parent[i];\n        for (int i = 1; i <= mx; i++) {\n            for (int node = 0; node < n; node++) {\n                int p = ansc[node][i - 1];\n                if (p == -1) ansc[node][i] = -1;\n                else ansc[node][i] = ansc[p][i - 1];\n            }\n        }\n        swap(anscestor, ansc);\n    }\n\n    int getKthAncestor(int node, int k) {\n        if (k > mx) return -1;\n        while (k > 0) {\n            int i = 0;\n            while (pow(2, i + 1) <= k) i++;\n            node = anscestor[node][i];\n            if (node == -1) return -1;\n            k -= pow(2, i);\n        }\n        return node;\n    }\n};","compare_result":"1111111110","title_slug":"kth-ancestor-of-a-tree-node"}